
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Optimizing Battery Life Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../extras/enabling-filevault.html" />
    
    
    <link rel="prev" href="correcting-sleep-problems.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../a-guide-to-build-guides.html">
            
                <a href="../a-guide-to-build-guides.html">
            
                    
                    A Guide to Build Guides
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Before you start</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../before-you-start/know-your-hardware.html">
            
                <a href="../before-you-start/know-your-hardware.html">
            
                    
                    Know Your Hardware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../before-you-start/bios-configuration.html">
            
                <a href="../before-you-start/bios-configuration.html">
            
                    
                    BIOS Configuration
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Necessary Skills & Terminology</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../useful-skills-terminology/a-little-unix-never-hurt-anyone.html">
            
                <a href="../useful-skills-terminology/a-little-unix-never-hurt-anyone.html">
            
                    
                    A Little UNIX Never Hurt Anyone!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../useful-skills-terminology/just-enough-git.html">
            
                <a href="../useful-skills-terminology/just-enough-git.html">
            
                    
                    Just Enough GIT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../useful-skills-terminology/whats-an-efi.html">
            
                <a href="../useful-skills-terminology/whats-an-efi.html">
            
                    
                    What's an EFI?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../useful-skills-terminology/what-about-kexts.html">
            
                <a href="../useful-skills-terminology/what-about-kexts.html">
            
                    
                    What about KEXTs?
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Installing macOS</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../prepare-install-macos/preparing-the-usb-media.html">
            
                <a href="../prepare-install-macos/preparing-the-usb-media.html">
            
                    
                    Preparing the USB Media
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../prepare-install-macos/macos-memory-allocation.html">
            
                <a href="../prepare-install-macos/macos-memory-allocation.html">
            
                    
                    macOS Memory Allocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../prepare-install-macos/smc-emulation.html">
            
                <a href="../prepare-install-macos/smc-emulation.html">
            
                    
                    SMC Emulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../prepare-install-macos/disabling-touchid.html">
            
                <a href="../prepare-install-macos/disabling-touchid.html">
            
                    
                    Disabling TouchID lookup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../prepare-install-macos/clover-template.html">
            
                <a href="../prepare-install-macos/clover-template.html">
            
                    
                    CLOVER Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../prepare-install-macos/display-configuration.html">
            
                <a href="../prepare-install-macos/display-configuration.html">
            
                    
                    Display Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../prepare-install-macos/choosing-a-macbook-smbios.html">
            
                <a href="../prepare-install-macos/choosing-a-macbook-smbios.html">
            
                    
                    Choosing a MacBook SMBIOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="../prepare-install-macos/setting-up-input-devices.html">
            
                <a href="../prepare-install-macos/setting-up-input-devices.html">
            
                    
                    Setting up Input Devices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="../prepare-install-macos/usb-pre-setup.html">
            
                <a href="../prepare-install-macos/usb-pre-setup.html">
            
                    
                    USB pre-setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="../prepare-install-macos/pre-installation-review.html">
            
                <a href="../prepare-install-macos/pre-installation-review.html">
            
                    
                    Pre-Installation Review
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="../prepare-install-macos/installing-the-operating-system.html">
            
                <a href="../prepare-install-macos/installing-the-operating-system.html">
            
                    
                    Installing the Operating System
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Post Installation</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../post-installation/adding-clover-to-the-bios.html">
            
                <a href="../post-installation/adding-clover-to-the-bios.html">
            
                    
                    Adding CLOVER to Your Boot Drive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../post-installation/configuring-usb-ports.html">
            
                <a href="../post-installation/configuring-usb-ports.html">
            
                    
                    Configuring USB Ports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../post-installation/enabling-wifi-and-bluetooth.html">
            
                <a href="../post-installation/enabling-wifi-and-bluetooth.html">
            
                    
                    Enabling WIFI & Bluetooth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../post-installation/setting-up-ethernet-adapters.html">
            
                <a href="../post-installation/setting-up-ethernet-adapters.html">
            
                    
                    Setting up Ethernet Adapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../post-installation/configuring-your-audio-device.html">
            
                <a href="../post-installation/configuring-your-audio-device.html">
            
                    
                    Configuring your Audio Device
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Battery/Power Management</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="locate-that-missing-battery.html">
            
                <a href="locate-that-missing-battery.html">
            
                    
                    Locate that Missing Battery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="correcting-sleep-problems.html">
            
                <a href="correcting-sleep-problems.html">
            
                    
                    Correcting Sleep Problems
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="6.3" data-path="optimizing-battery-life.html">
            
                <a href="optimizing-battery-life.html">
            
                    
                    Optimizing Battery Life
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Extras</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../extras/enabling-filevault.html">
            
                <a href="../extras/enabling-filevault.html">
            
                    
                    Enabling FileVault
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../extras/display-rotation.html">
            
                <a href="../extras/display-rotation.html">
            
                    
                    Display Rotation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../extras/dual-booting-with-bluetooth-devices.html">
            
                <a href="../extras/dual-booting-with-bluetooth-devices.html">
            
                    
                    Dual bootingâ with Bluetooth Devices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../extras/asussmc.html">
            
                <a href="../extras/asussmc.html">
            
                    
                    ASUS Function Keys
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Optimizing Battery Life</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="optimizing-battery-life">Optimizing Battery Life</h1>
<p>You may notice that your laptop uses a lot of power, possibly more than it did when you were using Windows. That&apos;s because Apple is configuring your device to operate like an Apple device. Since you have different hardware, you have a few extra steps to take to optimize battery life. Below you will find a few methods to test power usage, and to adjust your system parameters to improve battery life.</p>
<h2 id="measuring-power-in-macos">Measuring Power in macOS</h2>
<p>macOS exposes overall power usage under the SPPowerDataType data type. You can find the data either using terminal, or using coconut battery. Here&apos;s a simple function that calculates watts on demand.</p>
<pre><code class="lang-text">watts() {
  FORMULA=$(system_profiler SPPowerDataType | awk &apos;/Amperage\ \(mA\):/ {printf $3&quot; * &quot;}; /Voltage\ \(mV\):/ {print $3}&apos;)
  WATTS=$(echo &quot;scale=3; ${FORMULA} / 1000000&quot; | bc 2&gt;/dev/null)
  if ! [[ ${WATTS} =~ [0-9] ]];
  then
    WATTS=0
  fi
  echo &quot;${WATTS} mW&quot;
}
</code></pre>
<p>Run it in a terminal to create a function called &apos;watts&apos;. If you would like the command to be persistent, you should add it to your user profile (~/.profile). You&apos;ll see a negative number when you&apos;re discharging which is your discharge watts. When you&apos;re charging that number will be positive, that&apos;s the power draw of charging. If you see a negative number while charging, you&apos;re probably in the 97-100% range and overcharging protection is preventing the computer from charging.</p>
<p>Below is another function that is similar to Activity Monitor&apos;s Energy tab, but run from a terminal.</p>
<pre><code class="lang-text">powertop() {
  top -stats pid,command,power -o power
}
</code></pre>
<p>As before it isn&apos;t persistent, so you&apos;ll want to add it to your profile if you want to use it after a reboot or after you close the terminal. To use it, just run &apos;powertop&apos;.</p>
<p>Another command that you can use to track energy usage is called powermetrics. It is a macOS built-in command that will provide more in-depth stats on what your CPU is actually doing.</p>
<pre><code class="lang-text">sudo powermetrics --show-process-energy
</code></pre>
<h3 id="coconut-battery">Coconut Battery</h3>
<p>If you prefer GUI tools, or would like power usage in your menu bar, CoconutBattery is a great resource. You may notice that you aren&apos;t getting any cycle count statistics and your battery temperature is reporting -273C. Don&apos;t worry about that, your battery probably doesn&apos;t have those features.</p>
<p><a href="https://www.coconut-flavour.com/coconutbattery/" target="_blank">Visit the Coconut Battery website</a></p>
<h2 id="optimizing-your-battery-life">Optimizing Your Battery Life</h2>
<h3 id="cpufriend">CPUFriend</h3>
<p>If you are using the SMBIOS of a 2015+ Macbook or 2016+ Macbook Pro, the tool for this job is called CPUFriend and you can download it from Github. If you are using the SMBIOS of an earlier Macbook or Macbook Pro, skip to the ssdtPRGen section instead.</p>
<p><a href="https://github.com/acidanthera/CPUFriend" target="_blank">Download CPUFriend @ Github</a></p>
<p>CPUFriend needs a helper to operate properly on your system, and corpnewt has written a tool that will help you do exactly that called CPUFriendFriend. Visit the project page for instructions on how to download and use it.</p>
<p><a href="https://github.com/corpnewt/CPUFriendFriend" target="_blank">CPUFriendFriend @ Github</a></p>
<p>When you run CPUFriendFriend you will be prompted to enter your base clock speed. This is the TDP-down clock rate if supported. If you don&apos;t know, or if it isn&apos;t disclosed, try 800MHz.</p>
<p>Look your CPU up on Intel&apos;s Ark website to find the data that you need.</p>
<p><a href="https://ark.intel.com/content/www/us/en/ark.html#@Processors" target="_blank">Visit Intel&apos;s Ark Website</a></p>
<p>Next you will be asked to enter an EPP value. This is explained in the instructions, but below is a table that may help you make your decision.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Value</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0x00</td>
<td style="text-align:left">Performance - Instructs the processor to scale as fast as possible.</td>
</tr>
<tr>
<td style="text-align:left">0x40</td>
<td style="text-align:left">Balance performance - Scale at a rate that offers better performance while considering battery life.</td>
</tr>
<tr>
<td style="text-align:left">0x80</td>
<td style="text-align:left">Balance power - Scale at a rate that prefers battery life while slightly sacrificing performance.</td>
</tr>
<tr>
<td style="text-align:left">0xC0</td>
<td style="text-align:left">Max Power saving - Sacrifice performance for battery life while still performing well enough for normal tasks.</td>
</tr>
</tbody>
</table>
<p>Once CPUFriendFriend has been run, copy the CPUFriend and CPUFriendDataProvider kexts to C/k/O. Once that&apos;s finished, open your config.plist and make sure that SSDT/Generate/PluginType is set to true. Finally, reboot.</p>
<p>You should immediately notice a difference in battery life.</p>
<h3 id="ssdtprgen">ssdtPRGen</h3>
<p>Users of SMBIOS of Macbook Pros earlier than 2016 should use tool called ssdtPRGen written by Piker Alpha to configure scaling. Visit the project page and use the tool to create an SSDT for your CPU.</p>
<p><a href="https://github.com/Piker-Alpha/ssdtPRGen.sh" target="_blank">Visit ssdtPRGen @ Github</a></p>
<p>Using ssdtPRGen is relatively simple, run the utility and follow the prompts. This will create a frequency configuration for your system and place the files in ~/Library/ssdtPRGen. Copy ~/Library/ssdtPRGen/ssdt.aml to CLOVER/ACPI/patched, update CLOVER if you are using a strict SSDT configuration (sorted order with an explicit list of SSDTs in config.plist), make sure SSDT/Generate/PluginType is set to True, and reboot. If you are not using a strict SSDT configuration in CLOVER you can ignore that step and just reboot.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="correcting-sleep-problems.html" class="navigation navigation-prev " aria-label="Previous page: Correcting Sleep Problems">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../extras/enabling-filevault.html" class="navigation navigation-next " aria-label="Next page: Enabling FileVault">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Optimizing Battery Life","level":"6.3","depth":1,"next":{"title":"Enabling FileVault","level":"7.1","depth":1,"path":"extras/enabling-filevault.md","ref":"extras/enabling-filevault.md","articles":[]},"previous":{"title":"Correcting Sleep Problems","level":"6.2","depth":1,"path":"battery-power-management/correcting-sleep-problems.md","ref":"battery-power-management/correcting-sleep-problems.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-default","-lunr","-search","search-plus","addcssjs","hints"],"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"fontsettings":{"theme":"night","family":"sans","size":2},"search-plus":{},"addcssjs":{"css":[],"js":[]},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"highlight":{},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":[]},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}}},"theme":"default","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"links":{"sharing":{"google":false,"facebook":false,"twitter":false,"weibo":false,"all":false}},"gitbook":"*"},"file":{"path":"battery-power-management/optimizing-battery-life.md","mtime":"2020-04-13T20:40:01.050Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-04-13T20:40:53.684Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    

    </body>
</html>

